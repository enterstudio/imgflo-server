<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="865" height="400" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[# Part of: imgflo-server
# DSL used: https://bramp.github.io/js-sequence-diagrams/
title: Scenario: Image already in cache

Client->web: HTTP GET\n/graph/passthrough?input=http://someimage...
web->Redis: Is a1b2c3d4e5 cached?
Redis->web: Yes, at https:/....
web->Client: HTTP 301 redirect\nLocation: https://s3.../processedimage.png
Client->S3: GET processedimage.png
]]></source><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock55-obj68671" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68674" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68677" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68680" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68683" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker></defs><rect x="10" y="10" width="330" height="29" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="15" y="15" width="320" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="175" y="24.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">Scenario: Image already in cache</tspan></text><rect x="10" y="49" width="80" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="20" y="59" width="60" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="50" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">Client</tspan></text><rect x="10" y="341.4000015258789" width="80" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="20" y="351.3999938964844" width="60" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="50" y="360.9000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">Client</tspan></text><path style="" fill="none" stroke="#000000" d="M50,88L50,341.4000015258789" stroke-width="2"></path><rect x="485" y="49" width="50" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="495" y="59" width="30" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="510" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">web</tspan></text><rect x="485" y="341.4000015258789" width="50" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="495" y="351.3999938964844" width="30" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="510" y="360.9000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">web</tspan></text><path style="" fill="none" stroke="#000000" d="M510,88L510,341.4000015258789" stroke-width="2"></path><rect x="705" y="49" width="70" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="715" y="59" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="740" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">Redis</tspan></text><rect x="705" y="341.4000015258789" width="70" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="715" y="351.3999938964844" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="740" y="360.9000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">Redis</tspan></text><path style="" fill="none" stroke="#000000" d="M740,88L740,341.4000015258789" stroke-width="2"></path><rect x="795" y="49" width="40" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="805" y="59" width="20" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="815" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">S3</tspan></text><rect x="795" y="341.4000015258789" width="40" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="805" y="351.3999938964844" width="20" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="815" y="360.9000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">S3</tspan></text><path style="" fill="none" stroke="#000000" d="M815,88L815,341.4000015258789" stroke-width="2"></path><rect x="60" y="93.9000015258789" width="440" height="38.20000457763672" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="280" y="113" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.099998474121094">HTTP GET</tspan><tspan dy="19.2" x="280">/graph/passthrough?input=http://someimage...</tspan></text><path style="" fill="none" stroke="#000000" d="M50,146.20000076293945C50,146.20000076293945,455.13959884643555,146.20000076293945,504.99076042324305,146.20000076293945" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68671)" stroke-dasharray="0"></path><rect x="520" y="161.6999969482422" width="210" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="625" y="171.20000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500003814697266">Is a1b2c3d4e5 cached?</tspan></text><path style="" fill="none" stroke="#000000" d="M510,185.20000076293945C510,185.20000076293945,701.4494556188583,185.20000076293945,735.0091990598594,185.20000076293945" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68674)" stroke-dasharray="0"></path><rect x="530" y="200.6999969482422" width="190" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="625" y="210.20000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500003814697266">Yes, at https:/....</tspan></text><path style="" fill="none" stroke="#000000" d="M740,224.20000076293945C740,224.20000076293945,548.5505443811417,224.20000076293945,514.9908009401406,224.20000076293945" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68677)" stroke-dasharray="0"></path><rect x="70" y="230.10000610351562" width="420" height="38.199981689453125" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="280" y="249.20000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.099994659423828">HTTP 301 redirect</tspan><tspan dy="19.2" x="280">Location: https://s3.../processedimage.png</tspan></text><path style="" fill="none" stroke="#000000" d="M510,282.4000015258789C510,282.4000015258789,104.86040115356445,282.4000015258789,55.009239576756954,282.4000015258789" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68680)" stroke-dasharray="0"></path><rect x="322.5" y="297.8999938964844" width="220" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="432.5" y="307.4000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">GET processedimage.png</tspan></text><path style="" fill="none" stroke="#000000" d="M50,321.4000015258789C50,321.4000015258789,744.1613312251866,321.4000015258789,810.0015844432005,321.4000015258789" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68683)" stroke-dasharray="0"></path></svg>