<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1890" height="1218" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[# Part of: imgflo-server
# DSL used: https://bramp.github.io/js-sequence-diagrams/
title: Scenario: Image not cached

participant Client
participant OriginalServer
participant web
participant RabbitMQ
participant Redis
participant S3
participant urgentworker

Client->web: HTTP GET\n/graph/passthrough\n?input=http://someimage...
web->Redis: Is a1b2c3d4e5 cached?
Redis->web: No
web->RabbitMQ: Urgent job for imgflo:\n { id: 123, graph: passthrough... }
RabbitMQ->urgentworker: { id: 123... }

Note left of urgentworker: image could be produced while queueing\nby another job/request 
urgentworker->Redis: is a1b2c3d4e5 cached?
Redis->urgentworker: No

Note left of urgentworker: Get input image
urgentworker->OriginalServer: HTTP GET\nhttp://someimage...
OriginalServer->urgentworker: HTTP response\nContent-Type:image/png
Note right of urgentworker: Process image
urgentworker->subprocess: EXEC imgflo < 123.fbp.json
subprocess->urgentworker: EXIT 0 (success)

Note left of urgentworker: Upload output image
urgentworker->S3: HTTP POST\nhttps://s3.../processedimage.png
S3->urgentworker: HTTP 200 OK

urgentworker->RabbitMQ: Job completed\n{ id: 123.. }
RabbitMQ->web: { id: 123..., error: null, output: https://s3... }

web->Client: HTTP 301 redirect\nLocation: \nhttps://s3.../processedimage.png
Client->S3: GET processedimage.png
]]></source><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock55-obj68567" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68570" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68573" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68576" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68579" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68585" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68588" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68594" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68597" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68603" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68606" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68612" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68615" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68618" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68621" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68624" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj68627" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker></defs><rect x="10" y="10" width="270" height="29" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="15" y="15" width="260" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="145" y="24.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">Scenario: Image not cached</tspan></text><rect x="10" y="49" width="80" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="20" y="59" width="60" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="50" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">Client</tspan></text><rect x="10" y="1159.0000076293945" width="80" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="20" y="1169" width="60" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="50" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">Client</tspan></text><path style="" fill="none" stroke="#000000" d="M50,88L50,1159.0000076293945" stroke-width="2"></path><rect x="110" y="49" width="160" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="120" y="59" width="140" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="190" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">OriginalServer</tspan></text><rect x="110" y="1159.0000076293945" width="160" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="120" y="1169" width="140" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="190" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">OriginalServer</tspan></text><path style="" fill="none" stroke="#000000" d="M190,88L190,1159.0000076293945" stroke-width="2"></path><rect x="365" y="49" width="50" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="375" y="59" width="30" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="390" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">web</tspan></text><rect x="365" y="1159.0000076293945" width="50" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="375" y="1169" width="30" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="390" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">web</tspan></text><path style="" fill="none" stroke="#000000" d="M390,88L390,1159.0000076293945" stroke-width="2"></path><rect x="860" y="49" width="100" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="870" y="59" width="80" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="910" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">RabbitMQ</tspan></text><rect x="860" y="1159.0000076293945" width="100" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="870" y="1169" width="80" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="910" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">RabbitMQ</tspan></text><path style="" fill="none" stroke="#000000" d="M910,88L910,1159.0000076293945" stroke-width="2"></path><rect x="980" y="49" width="70" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="990" y="59" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1015" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">Redis</tspan></text><rect x="980" y="1159.0000076293945" width="70" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="990" y="1169" width="50" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1015" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">Redis</tspan></text><path style="" fill="none" stroke="#000000" d="M1015,88L1015,1159.0000076293945" stroke-width="2"></path><rect x="1070" y="49" width="40" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1080" y="59" width="20" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1090" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">S3</tspan></text><rect x="1070" y="1159.0000076293945" width="40" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1080" y="1169" width="20" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1090" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">S3</tspan></text><path style="" fill="none" stroke="#000000" d="M1090,88L1090,1159.0000076293945" stroke-width="2"></path><rect x="1450" y="49" width="140" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1460" y="59" width="120" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1520" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">urgentworker</tspan></text><rect x="1450" y="1159.0000076293945" width="140" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1460" y="1169" width="120" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1520" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">urgentworker</tspan></text><path style="" fill="none" stroke="#000000" d="M1520,88L1520,1159.0000076293945" stroke-width="2"></path><rect x="1740" y="49" width="120" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1750" y="59" width="100" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1800" y="68.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5">subprocess</tspan></text><rect x="1740" y="1159.0000076293945" width="120" height="39" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1750" y="1169" width="100" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1800" y="1178.5000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">subprocess</tspan></text><path style="" fill="none" stroke="#000000" d="M1800,88L1800,1159.0000076293945" stroke-width="2"></path><rect x="90" y="84.30000305175781" width="260" height="57.40000915527344" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="220" y="113" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-13.699996948242188">HTTP GET</tspan><tspan dy="19.2" x="220">/graph/passthrough</tspan><tspan dy="19.2" x="220">?input=http://someimage...</tspan></text><path style="" fill="none" stroke="#000000" d="M50,165.4000015258789C50,165.4000015258789,342.9430818557739,165.4000015258789,384.9964344268665,165.4000015258789" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68567)" stroke-dasharray="0"></path><rect x="597.5" y="180.89999389648438" width="210" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="702.5" y="190.4000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">Is a1b2c3d4e5 cached?</tspan></text><path style="" fill="none" stroke="#000000" d="M390,204.4000015258789C390,204.4000015258789,950.9646532684565,204.4000015258789,1009.9919397818121,204.4000015258789" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68570)" stroke-dasharray="0"></path><rect x="692.5" y="219.89999389648438" width="20" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="702.5" y="229.4000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">No</tspan></text><path style="" fill="none" stroke="#000000" d="M1015,243.4000015258789C1015,243.4000015258789,454.03534673154354,243.4000015258789,395.0080602181879,243.4000015258789" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68573)" stroke-dasharray="0"></path><rect x="475" y="249.29998779296875" width="350" height="38.20001220703125" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="650" y="268.4000015258789" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.099998474121094">Urgent job for imgflo:</tspan><tspan dy="19.2" x="650"> { id: 123, graph: passthrough... }</tspan></text><path style="" fill="none" stroke="#000000" d="M390,301.60000228881836C390,301.60000228881836,851.6847592592239,301.60000228881836,904.9994299451646,301.60000228881836" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68576)" stroke-dasharray="0"></path><rect x="1145" y="317.1000061035156" width="140" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1215" y="326.60000228881836" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.499996185302734">{ id: 123... }</tspan></text><path style="" fill="none" stroke="#000000" d="M910,340.60000228881836C910,340.60000228881836,1456.7962765693665,340.60000228881836,1515.000177102629,340.60000228881836" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68579)" stroke-dasharray="0"></path><rect x="1110" y="360.60000228881836" width="390" height="48.20000076293945" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1115" y="365.6000061035156" width="380" height="38.199981689453125" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1305" y="384.7000026702881" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.100015640258789">image could be produced while queueing</tspan><tspan dy="19.2" x="1305">by another job/request</tspan></text><rect x="1162.5" y="424.29998779296875" width="210" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1267.5" y="433.8000030517578" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5000152587890625">is a1b2c3d4e5 cached?</tspan></text><path style="" fill="none" stroke="#000000" d="M1520,447.8000030517578C1520,447.8000030517578,1072.4459075927734,447.8000030517578,1019.9981623888016,447.8000030517578" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68585)" stroke-dasharray="0"></path><rect x="1257.5" y="463.29998779296875" width="20" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1267.5" y="472.8000030517578" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5000152587890625">No</tspan></text><path style="" fill="none" stroke="#000000" d="M1015,486.8000030517578C1015,486.8000030517578,1462.5540924072266,486.8000030517578,1515.0018376111984,486.8000030517578" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68588)" stroke-dasharray="0"></path><rect x="1340" y="506.8000030517578" width="160" height="29" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1345" y="511.79998779296875" width="150" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1420" y="521.3000030517578" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.5000152587890625">Get input image</tspan></text><rect x="760" y="541.7000122070312" width="190" height="38.20001220703125" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="855" y="560.8000030517578" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.0999908447265625">HTTP GET</tspan><tspan dy="19.2" x="855">http://someimage...</tspan></text><path style="" fill="none" stroke="#000000" d="M1520,594.0000038146973C1520,594.0000038146973,283.59429966658354,594.0000038146973,194.9993111295089,594.0000038146973" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68594)" stroke-dasharray="0"></path><rect x="745" y="599.9000244140625" width="220" height="38.199951171875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="855" y="619.0000038146973" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.100002288818359">HTTP response</tspan><tspan dy="19.2" x="855">Content-Type:image/png</tspan></text><path style="" fill="none" stroke="#000000" d="M190,652.2000045776367C190,652.2000045776367,1426.4057003334165,652.2000045776367,1515.000688870491,652.2000045776367" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68597)" stroke-dasharray="0"></path><rect x="1540" y="672.2000045776367" width="140" height="29" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1545" y="677.2000122070312" width="130" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1610" y="686.7000045776367" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.499992370605469">Process image</tspan></text><rect x="1530" y="716.7000122070312" width="260" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1660" y="726.2000045776367" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.499992370605469">EXEC imgflo &lt; 123.fbp.json</tspan></text><path style="" fill="none" stroke="#000000" d="M1520,740.2000045776367C1520,740.2000045776367,1757.3292136192322,740.2000045776367,1794.9913202726748,740.2000045776367" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68603)" stroke-dasharray="0"></path><rect x="1580" y="755.7000122070312" width="160" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1660" y="765.2000045776367" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.499992370605469">EXIT 0 (success)</tspan></text><path style="" fill="none" stroke="#000000" d="M1800,779.2000045776367C1800,779.2000045776367,1562.6707863807678,779.2000045776367,1525.0086797273252,779.2000045776367" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68606)" stroke-dasharray="0"></path><rect x="1300" y="799.2000045776367" width="200" height="29" rx="0" ry="0" fill="none" stroke="#000000" style="" stroke-width="2"></rect><rect x="1305" y="804.2000122070312" width="190" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1400" y="813.7000045776367" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.499992370605469">Upload output image</tspan></text><rect x="1145" y="834.0999755859375" width="320" height="38.20001220703125" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1305" y="853.2000045776367" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.100013732910156">HTTP POST</tspan><tspan dy="19.2" x="1305">https://s3.../processedimage.png</tspan></text><path style="" fill="none" stroke="#000000" d="M1520,886.4000053405762C1520,886.4000053405762,1142.9555661976337,886.4000053405762,1094.9965451988464,886.4000053405762" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68612)" stroke-dasharray="0"></path><rect x="1250" y="901.9000244140625" width="110" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1305" y="911.4000053405762" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.499980926513672">HTTP 200 OK</tspan></text><path style="" fill="none" stroke="#000000" d="M1090,925.4000053405762C1090,925.4000053405762,1467.0444338023663,925.4000053405762,1515.0034548011536,925.4000053405762" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68615)" stroke-dasharray="0"></path><rect x="1150" y="931.2999877929688" width="130" height="38.20001220703125" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="1215" y="950.4000053405762" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-4.100025177001953">Job completed</tspan><tspan dy="19.2" x="1215">{ id: 123.. }</tspan></text><path style="" fill="none" stroke="#000000" d="M1520,983.6000061035156C1520,983.6000061035156,973.2037234306335,983.6000061035156,914.9998228973709,983.6000061035156" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68618)" stroke-dasharray="0"></path><rect x="400" y="999.0999755859375" width="500" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="650" y="1008.6000061035156" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500030517578125">{ id: 123..., error: null, output: https://s3... }</tspan></text><path style="" fill="none" stroke="#000000" d="M910,1022.6000061035156C910,1022.6000061035156,448.31524074077606,1022.6000061035156,395.0005700548354,1022.6000061035156" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68621)" stroke-dasharray="0"></path><rect x="60" y="1018.9000244140625" width="320" height="57.4000244140625" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="220" y="1047.6000061035156" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="-13.699981689453125">HTTP 301 redirect</tspan><tspan dy="19.2" x="220">Location: </tspan><tspan dy="19.2" x="220">https://s3.../processedimage.png</tspan></text><path style="" fill="none" stroke="#000000" d="M390,1100.0000076293945C390,1100.0000076293945,97.05691814422607,1100.0000076293945,55.00356557313353,1100.0000076293945" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68624)" stroke-dasharray="0"></path><rect x="460" y="1115.5" width="220" height="19" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text style="text-anchor: middle; font-family: Andale Mono,monospace; font-size: 16px;" x="570" y="1125.0000076293945" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000"><tspan dy="5.500007629394531">GET processedimage.png</tspan></text><path style="" fill="none" stroke="#000000" d="M50,1139.0000076293945C50,1139.0000076293945,1007.2894850373268,1139.0000076293945,1084.9991417206547,1139.0000076293945" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj68627)" stroke-dasharray="0"></path></svg>